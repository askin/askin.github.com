<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>socket on Aşkın Özgür</title><link>https://blog.askin.ws/tags/socket/</link><description>Recent content in socket on Aşkın Özgür</description><generator>Hugo -- gohugo.io</generator><language>tr-TR</language><managingEditor>askin@askin.ws (Aşkın Özgür)</managingEditor><webMaster>askin@askin.ws (Aşkın Özgür)</webMaster><lastBuildDate>Fri, 03 Aug 2012 15:31:00 +0300</lastBuildDate><atom:link href="https://blog.askin.ws/tags/socket/index.xml" rel="self" type="application/rss+xml"/><item><title>UDP Broadcast sunucu - istemci</title><link>https://blog.askin.ws/blog/udp-broadcast-sunucu-istemci/</link><pubDate>Fri, 03 Aug 2012 15:31:00 +0300</pubDate><author>askin@askin.ws (Aşkın Özgür)</author><guid>https://blog.askin.ws/blog/udp-broadcast-sunucu-istemci/</guid><description>&lt;p>Sunucu:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-c" data-lang="c">&lt;span style="color:#75715e">#include&lt;/span> &lt;span style="color:#75715e">&amp;lt;stdio.h&amp;gt;&lt;/span>&lt;span style="color:#75715e">
&lt;/span>&lt;span style="color:#75715e">#include&lt;/span> &lt;span style="color:#75715e">&amp;lt;string.h&amp;gt;&lt;/span>&lt;span style="color:#75715e">
&lt;/span>&lt;span style="color:#75715e">#include&lt;/span> &lt;span style="color:#75715e">&amp;lt;sys/types.h&amp;gt;&lt;/span>&lt;span style="color:#75715e">
&lt;/span>&lt;span style="color:#75715e">#include&lt;/span> &lt;span style="color:#75715e">&amp;lt;sys/socket.h&amp;gt;&lt;/span>&lt;span style="color:#75715e">
&lt;/span>&lt;span style="color:#75715e">#include&lt;/span> &lt;span style="color:#75715e">&amp;lt;netinet/in.h&amp;gt;&lt;/span>&lt;span style="color:#75715e">
&lt;/span>&lt;span style="color:#75715e">&lt;/span>
&lt;span style="color:#75715e">#define MY_PORT 3333
&lt;/span>&lt;span style="color:#75715e">&lt;/span>
&lt;span style="color:#66d9ef">int&lt;/span> &lt;span style="color:#a6e22e">main&lt;/span>(&lt;span style="color:#66d9ef">int&lt;/span> argc, &lt;span style="color:#66d9ef">char&lt;/span> &lt;span style="color:#f92672">*&lt;/span>argv[])
{
&lt;span style="color:#66d9ef">int&lt;/span> sockfd, new_fd;
&lt;span style="color:#66d9ef">struct&lt;/span> sockaddr_in my_addr; &lt;span style="color:#75715e">// hedef adres
&lt;/span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">struct&lt;/span> sockaddr_in their_addr; &lt;span style="color:#75715e">// baglanti yapan adres
&lt;/span>&lt;span style="color:#75715e">&lt;/span>
&lt;span style="color:#66d9ef">int&lt;/span> sin_size, rt;
&lt;span style="color:#75715e">// gelen verinin tutuldugu buffer
&lt;/span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">char&lt;/span> buf[&lt;span style="color:#ae81ff">32&lt;/span>];
&lt;span style="color:#75715e">// islem yapmak icin gerekli dosya gosterici
&lt;/span>&lt;span style="color:#75715e">&lt;/span> sockfd &lt;span style="color:#f92672">=&lt;/span> socket(AF_INET, SOCK_DGRAM, &lt;span style="color:#ae81ff">0&lt;/span>);
sin_size &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">sizeof&lt;/span>(&lt;span style="color:#66d9ef">struct&lt;/span> sockaddr_in);
&lt;span style="color:#75715e">// adres ile ilgili ayarlar
&lt;/span>&lt;span style="color:#75715e">&lt;/span> my_addr.sin_family &lt;span style="color:#f92672">=&lt;/span> AF_INET;
my_addr.sin_port &lt;span style="color:#f92672">=&lt;/span> htons(MY_PORT); &lt;span style="color:#75715e">// kullanilacak port
&lt;/span>&lt;span style="color:#75715e">&lt;/span> my_addr.sin_addr.s_addr &lt;span style="color:#f92672">=&lt;/span> INADDR_ANY; &lt;span style="color:#75715e">// mevcut ip adresi
&lt;/span>&lt;span style="color:#75715e">&lt;/span> memset(&lt;span style="color:#f92672">&amp;amp;&lt;/span>(my_addr.sin_zero), &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">8&lt;/span>); &lt;span style="color:#75715e">// geri kalani 0la
&lt;/span>&lt;span style="color:#75715e">&lt;/span>
&lt;span style="color:#75715e">// socket ile dosyayi iliskilendir
&lt;/span>&lt;span style="color:#75715e">&lt;/span> bind(sockfd, (&lt;span style="color:#66d9ef">struct&lt;/span> sockaddr &lt;span style="color:#f92672">*&lt;/span>)&lt;span style="color:#f92672">&amp;amp;&lt;/span>my_addr, &lt;span style="color:#66d9ef">sizeof&lt;/span>(&lt;span style="color:#66d9ef">struct&lt;/span> sockaddr));
&lt;span style="color:#66d9ef">while&lt;/span> ( &lt;span style="color:#ae81ff">1&lt;/span> ) {
rt &lt;span style="color:#f92672">=&lt;/span> recvfrom (sockfd, buf, &lt;span style="color:#ae81ff">12&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, (&lt;span style="color:#66d9ef">struct&lt;/span> sockaddr &lt;span style="color:#f92672">*&lt;/span>)&lt;span style="color:#f92672">&amp;amp;&lt;/span>their_addr, &lt;span style="color:#f92672">&amp;amp;&lt;/span>sin_size);
&lt;span style="color:#66d9ef">if&lt;/span> (rt &lt;span style="color:#f92672">&amp;gt;&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>) {
printf (&lt;span style="color:#e6db74">&amp;#34;recv: %s&lt;/span>&lt;span style="color:#ae81ff">\n&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>, buf);
} &lt;span style="color:#66d9ef">else&lt;/span> &lt;span style="color:#66d9ef">if&lt;/span> (rt &lt;span style="color:#f92672">&amp;lt;&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>) {
printf(&lt;span style="color:#e6db74">&amp;#34;Baglanti koptu&lt;/span>&lt;span style="color:#ae81ff">\n&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span>);
&lt;span style="color:#66d9ef">break&lt;/span>;
}
}
close(sockfd);
&lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>;
}
&lt;/code>&lt;/pre>&lt;/div>&lt;p>İstemci:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-c" data-lang="c">&lt;span style="color:#75715e">#include&lt;/span> &lt;span style="color:#75715e">&amp;lt;stdio.h&amp;gt;&lt;/span>&lt;span style="color:#75715e">
&lt;/span>&lt;span style="color:#75715e">#include&lt;/span> &lt;span style="color:#75715e">&amp;lt;string.h&amp;gt;&lt;/span>&lt;span style="color:#75715e">
&lt;/span>&lt;span style="color:#75715e">#include&lt;/span> &lt;span style="color:#75715e">&amp;lt;sys/types.h&amp;gt;&lt;/span>&lt;span style="color:#75715e">
&lt;/span>&lt;span style="color:#75715e">#include&lt;/span> &lt;span style="color:#75715e">&amp;lt;sys/socket.h&amp;gt;&lt;/span>&lt;span style="color:#75715e">
&lt;/span>&lt;span style="color:#75715e">#include&lt;/span> &lt;span style="color:#75715e">&amp;lt;netinet/in.h&amp;gt;&lt;/span>&lt;span style="color:#75715e">
&lt;/span>&lt;span style="color:#75715e">&lt;/span>
&lt;span style="color:#75715e">#define DEST_IP &amp;#34;255.255.255.255&amp;#34;
&lt;/span>&lt;span style="color:#75715e">#define DEST_PORT 3333
&lt;/span>&lt;span style="color:#75715e">&lt;/span>
&lt;span style="color:#66d9ef">int&lt;/span> &lt;span style="color:#a6e22e">main&lt;/span>(&lt;span style="color:#66d9ef">int&lt;/span> argc, &lt;span style="color:#66d9ef">char&lt;/span> &lt;span style="color:#f92672">*&lt;/span>argv[])
{
&lt;span style="color:#66d9ef">int&lt;/span> sockfd, new_fd;
&lt;span style="color:#66d9ef">struct&lt;/span> sockaddr_in dest_addr; &lt;span style="color:#75715e">// hedef adres
&lt;/span>&lt;span style="color:#75715e">&lt;/span>
&lt;span style="color:#66d9ef">int&lt;/span> sin_size, rt;
sin_size &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">sizeof&lt;/span>(&lt;span style="color:#66d9ef">struct&lt;/span> sockaddr_in);
&lt;span style="color:#75715e">// islem yapmak icin gerekli dosya gosterici
&lt;/span>&lt;span style="color:#75715e">&lt;/span> sockfd &lt;span style="color:#f92672">=&lt;/span> socket(AF_INET, SOCK_DGRAM, &lt;span style="color:#ae81ff">0&lt;/span>);
&lt;span style="color:#75715e">// adres ile ilgili ayarlar
&lt;/span>&lt;span style="color:#75715e">&lt;/span> dest_addr.sin_family &lt;span style="color:#f92672">=&lt;/span> AF_INET;
dest_addr.sin_port &lt;span style="color:#f92672">=&lt;/span> htons(DEST_PORT);
dest_addr.sin_addr.s_addr &lt;span style="color:#f92672">=&lt;/span> inet_addr(DEST_IP);
memset(&lt;span style="color:#f92672">&amp;amp;&lt;/span>(dest_addr.sin_zero), &lt;span style="color:#ae81ff">0&lt;/span>, &lt;span style="color:#ae81ff">8&lt;/span>); &lt;span style="color:#75715e">// geri kalani 0 la
&lt;/span>&lt;span style="color:#75715e">&lt;/span>
&lt;span style="color:#75715e">// Broadcast icin gerekli yetkiyi al
&lt;/span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#66d9ef">int&lt;/span> flag &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">1&lt;/span>;
&lt;span style="color:#66d9ef">if&lt;/span> (setsockopt (sockfd, SOL_SOCKET, SO_BROADCAST, &lt;span style="color:#f92672">&amp;amp;&lt;/span>flag, &lt;span style="color:#66d9ef">sizeof&lt;/span>(flag)) &lt;span style="color:#f92672">&amp;lt;&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>)
perror(&lt;span style="color:#e6db74">&amp;#34;setsockopt&amp;#34;&lt;/span>);
&lt;span style="color:#75715e">// mesaji gonder
&lt;/span>&lt;span style="color:#75715e">&lt;/span> rt &lt;span style="color:#f92672">=&lt;/span> sendto (sockfd, &lt;span style="color:#e6db74">&amp;#34;slm asl plz&amp;#34;&lt;/span>, &lt;span style="color:#ae81ff">12&lt;/span>, &lt;span style="color:#ae81ff">0&lt;/span>, (&lt;span style="color:#66d9ef">const&lt;/span> &lt;span style="color:#66d9ef">struct&lt;/span> sockaddr &lt;span style="color:#f92672">*&lt;/span>)&lt;span style="color:#f92672">&amp;amp;&lt;/span>dest_addr, sin_size);
&lt;span style="color:#66d9ef">if&lt;/span> ( rt &lt;span style="color:#f92672">&amp;lt;&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span> )
perror(&lt;span style="color:#e6db74">&amp;#34;Hata: &amp;#34;&lt;/span>);
&lt;span style="color:#75715e">// socketi kapat
&lt;/span>&lt;span style="color:#75715e">&lt;/span> close(sockfd);
&lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>;
}
&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Java ile server socket yapımı</title><link>https://blog.askin.ws/blog/java-ile-server-socket-yapimi/</link><pubDate>Sat, 11 Dec 2010 04:25:00 +0300</pubDate><author>askin@askin.ws (Aşkın Özgür)</author><guid>https://blog.askin.ws/blog/java-ile-server-socket-yapimi/</guid><description>&lt;p>Bir proje için server sockete ihtiyaç duydum. Öncelikli dilim python olmasına rağmen, sunucu solaris olunca java ile yazmak daha cazip geldi. Öncelikli olarak test amaçlı birkaç satır kod yazdım. Akla gelen ilk örnek echo server oluyor :) aşağıda multi thread çalışan, birden fazla kullanıcıya cevap verebilecek bir echo server var:)&lt;/p></description></item></channel></rss>